!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var a=t();for(var n in a)("object"==typeof exports?exports:e)[n]=a[n]}}(self,(function(){return(()=>{"use strict";var e={d:(t,a)=>{for(var n in a)e.o(a,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:a[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>h});const a=function(e){var t=function(){e.methods.showDetailDiv(e.item,e.index)},a=e.item,n=a.id,o="";latitude_reg&&longitude_reg&&a.latitude&&a.longitude&&(o=getGreatCircleDistance(latitude_reg,longitude_reg,a.latitude,a.longitude)+"米");var r=.9*e.phoneWidth;return React.createElement("table",{style:{width:"100%",height:"100%"}},React.createElement("tbody",null,React.createElement("tr",{style:{borderBottom:"1px #eee solid",lineHeight:"20px"}},React.createElement("td",{style:{width:"80px",verticalAlign:"top",textAlign:"center"}},React.createElement("div",{style:{position:"relative",marginTop:"8px"}},React.createElement(Img,{src:thumbUrl+"/topstoreactphotos/"+n+".jpg",style:{width:"80px",height:"80px"},onTouchEnd:t}),React.createElement("div",{style:{position:"absolute",bottom:"5px",width:"80px",backgroundColor:"black",color:"white",opacity:"0.8",fontSize:"14px",fontWeight:"bolder",margin:"0 auto",letterSpacing:"-1px"}},a.act_date))),React.createElement("td",{style:{verticalAlign:"top",padding:"5px"}},React.createElement("table",null,React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,React.createElement("div",{style:{dispay:"block",whiteSpace:"nowrap",fontSize:"14px",fontWeight:"bold"}},React.createElement("span",{style:{color:"#000",fontWeight:"bold",fontSize:"16px"},onTouchEnd:t},a.name," ",React.createElement(Img,{src:thumbUrl+"/topstorephotos/"+n+".jpg",style:{width:"14px",height:"14px",borderRadius:"7px"}}))))),React.createElement("tr",null,React.createElement("td",{style:{dispay:"block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",width:"200px",maxWidth:"200px"}},React.createElement("span",{style:{color:"darkolivegreen",fontWeight:"bold"},onTouchEnd:t},a.act_title))),React.createElement("tr",null,React.createElement("td",null,React.createElement("span",{style:{dispay:"inline-block",lineHeight:"20px",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",width:"150px",maxWidth:r+"px",textAlign:"left",fontSize:"12px",color:"#333"}},a.city,a.district,a.town,a.street,a.building))),React.createElement("tr",null,React.createElement("td",{style:{dispay:"block",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",width:"200px",maxWidth:"200px"}},React.createElement("span",{style:{color:"darkred",fontWeight:"bold"},onTouchEnd:t},a.ownername),React.createElement("span",{style:{float:"right",color:"#999"}},o)))))))))};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function l(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(p,React.Component);var t,n,d,h,u=(d=p,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=i(d);if(h){var a=i(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return l(this,e)});function p(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),s(c(t=u.call(this,e)),"showSearchDiv",(function(){var e="table-row"==t.state.searchDivShow?"none":"table-row",a=t.state.searchData;"table-row"==e&&(a={}),t.setState({searchDivShow:e,searchData:a})})),s(c(t),"handleSearch",(function(e,a){t.setState({p:0,searchDivShow:"none",searchFlag:1},(function(){return t.setState({searchFlag:0})}))})),s(c(t),"handleChange",(function(e,a){var n=Object.assign({},t.state.searchData);n[e]=a.target.value||"","distance"==e&&(n.latitude=latitude_reg,n.longitude=longitude_reg),t.setState({searchData:n})})),s(c(t),"showDetailDiv",(function(e,a){event.stopPropagation();var n=c(t);t.setState({selectedStoreIndex:a,selectedStore:e});var o=Object.assign({},t.state.slides),r=100,l=setInterval((function(){r-=4,o.pert=r,o.startX=0,o.moveX=0,n.setState({slides:o}),r<=0&&(clearInterval(l),r=100)}),1)})),s(c(t),"hideDetailDiv",(function(e){e.stopPropagation();var a=c(t),n=Object.assign({},t.state.slides),o=0,r=setInterval((function(){o+=4,n.pert=o,n.startX=0,n.moveX=0,a.setState({slides:n}),o>=100&&(clearInterval(r),o=0)}),1)})),s(c(t),"detailStart",(function(e){if(e.stopPropagation(),e.touches.length){var a=Object.assign({},t.state.slides);a.startX=e.touches[0].pageX,a.moveX=0,a.pert=0,t.setState({slides:a})}})),s(c(t),"detailMove",(function(e){if(e.stopPropagation(),e.touches.length){var a=Object.assign({},t.state.slides),n=e.touches[0].pageX-a.startX;a.moveX=n,n>40&&(a.pert=n/2,t.setState({slides:a}))}})),s(c(t),"detailEnd",(function(e){e.stopPropagation();var a=Object.assign({},t.state.slides);a.pert>50?a.pert=100:a.pert=0,a.moveX=0,t.setState({slides:a})})),s(c(t),"touchStart",(function(e){if(e.stopPropagation(),e.touches.length){var a=Object.assign({},t.state.slides);a.startX=e.touches[0].pageX,a.moveX=0,t.setState({slides:a})}})),s(c(t),"touchMove",(function(e){if(e.stopPropagation(),e.touches.length){var a=Object.assign({},t.state.slides),n=e.touches[0].pageX-a.startX;a.moveX=n,n<-100&&(location.href="#/stores"),n>100&&(location.href="#/messages")}})),s(c(t),"clearSearch",(function(){var e=t.state.searchData;e.keywords="",t.setState({searchData:e,searchFlag:1},(function(){return t.setState({searchFlag:0})}))})),t.pageNo=0;var a=new ListView.DataSource({rowHasChanged:function(e,t){return e!==t}});return t.state={dataSource:a,keywords:null,searchData:{},searchDivShow:"none",detailDivShow:"none",selectedStoreIndex:0,slides:{pert:100,startX:0,moveX:0},selectedStore:{}},t}return t=p,(n=[{key:"render",value:function(){setTitle("社团列表");var e=this.state.selectedStore,t=e.id;return React.createElement("div",{ref:"main",style:{padding:"0px",width:"100%",height:"100%"},onTouchStart:this.touchStart,onTouchMove:this.touchMove},React.createElement("table",{style:{width:"100%",height:"100%"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{style:{height:"30px"}},React.createElement(Maintop,null))),React.createElement("tr",{style:{height:"43px"}},React.createElement("td",null,React.createElement("table",{style:{width:"100%",height:"100%",backgroundColor:"white",margin:"0 auto"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{style:{borderBottom:"1px #ccc solid",padding:"5px",textAlign:"center",backgroundColor:"darkseagreen",height:"40px"}},React.createElement("table",{className:"searchTable",style:{width:"100%",height:"30px"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{style:{width:"65px",textAlign:"center",color:"white"}},React.createElement("select",{style:{color:"white",backgroundColor:"darkseagreen",border:"0px"},value:this.state.searchData.distance,onChange:this.handleChange.bind(this,"distance")},React.createElement("option",{value:""},"不限距离"),React.createElement("option",{value:"1000"},"1000米"),React.createElement("option",{value:"2000"},"2000米"),React.createElement("option",{value:"3000"},"3000米"),React.createElement("option",{value:"4000"},"4000米"),React.createElement("option",{value:"5000"},"5000米"),React.createElement("option",{value:"6000"},"6000米"),React.createElement("option",{value:"7000"},"7000米"),React.createElement("option",{value:"8000"},"8000米"),React.createElement("option",{value:"9000"},"9000米"),React.createElement("option",{value:"10000"},"10000米"),React.createElement("option",{value:"11000"},"11000米"),React.createElement("option",{value:"12000"},"12000米"),React.createElement("option",{value:"13000"},"13000米"),React.createElement("option",{value:"14000"},"14000米"),React.createElement("option",{value:"15000"},"15000米"),React.createElement("option",{value:"16000"},"16000米"))),React.createElement("td",{style:{textAlign:"left",backgroundColor:"white",borderRadius:"5px"}},React.createElement("table",{style:{width:"100%"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,React.createElement("input",{style:{width:"90%"},placeholder:"关键词",value:this.state.searchData.keywords||"",onChange:this.handleChange.bind(this,"keywords")})),React.createElement("td",{style:{width:"30px"}},React.createElement("span",{style:{float:"right",width:"14px",height:"14px",lineHeight:"14px",fontSize:"12px",color:"white",backgroundColor:"#bbb",borderRadius:"7px",textAlign:"center",display:this.state.searchData.keywords?"inline":"none"},onTouchEnd:this.clearSearch},"x")))))),React.createElement("td",{style:{width:"50px",color:"white",textAlign:"center"},onTouchEnd:this.handleSearch.bind(this,1)},"搜索")))))))))),React.createElement("tr",null,React.createElement("td",{style:{overflowY:"scroll",verticalAlign:"top"}},React.createElement(Listall,{apiurl:Config.api+"shop/list?typeid=2",hashurl:"#/groups",backurl:"#/groups",searchData:this.state.searchData,item:a,searchFlag:this.state.searchFlag,methods:{showDetailDiv:this.showDetailDiv}}))),React.createElement("tr",null,React.createElement("td",{style:{height:"30px"}},React.createElement(Mainbottom,null))))),React.createElement("div",{style:{height:"98%",position:"fixed",top:"0px",transform:"translateX("+this.state.slides.pert+"%)",backgroundColor:"white",zIndex:"10000000",margin:"0 auto",width:"100%"},onTouchStart:this.detailStart,onTouchEnd:this.detailEnd,onTouchMove:this.detailMove},React.createElement("span",{style:{display:"inline-block",position:"absolute",right:"2px",top:"2px",background:"white",borderRadius:"15px",width:"30px",height:"30px",lineHeight:"30px",textAlign:"center"},onTouchEnd:this.hideDetailDiv},"X"),React.createElement("div",{style:{height:"20px"}}),React.createElement("table",{style:{width:"100%",height:"98%"}},React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",{style:{width:"5px"}}),React.createElement("td",{style:{textAlign:"left",verticalAlign:"top"}},React.createElement("div",{style:{color:"333",overflowY:"auto",width:"90%",height:"99%",margin:"0 auto",textAlign:"center"}},React.createElement("div",{style:{textAlign:"center",color:"firebrick",fontSize:"20px"},onTouchEnd:touchEnd.bind(this,"#/stores/detail/"+e.id+"?token="+token)},e.store_name,e.promote_title),React.createElement("div",{style:{textAlign:"center",color:"firebrick",fontSize:"14px",marginTop:"20px"}},React.createElement("span",{onTouchEnd:touchEnd.bind(this,"#/stores/main/"+e.id),style:{marginLeft:"10px",padding:"7px",color:"white",backgroundColor:"crimson",borderRadius:"5px",fontSize:"16px",fontFamily:"sans_serif"}},"进入社团主页")),React.createElement("br",null),React.createElement("img",{src:photoUrl+"/topstorephotos/"+t+".jpg",style:{width:"99%"}}),React.createElement("br",null),React.createElement("div",{style:{textAlign:"left"}},e.promote_detail),React.createElement("div",{style:{height:"20px"}}))),React.createElement("td",{style:{width:"5px"}}))))))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}();const h={List:d};return t})()}));